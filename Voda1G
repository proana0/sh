dHJ5OgkKCWltcG9ydCByZXF1ZXN0cyxqc29uLHB5ZmlnbGV0LHRlcm1jb2xvcgoJIyMtLS0tLS0tLS0tLS0tLS0tLS0jIwoJbG9nbyA9IHB5ZmlnbGV0LmZpZ2xldF9mb3JtYXQoJ0FobWVkIFJhbXp5JykKCW1iID0gcHlmaWdsZXQuZmlnbGV0X2Zvcm1hdCgiZGlzY291bnQgb2ZmZXJNQiIpCglkZXNjciA9ICIiIgoJIEJ5OiBBaG1lZCBSYW16eQoJIEZhY2Vib29rOiBBaG1lZFJhbXp5Lm1lCgkgIiIiCglwcmludCh0ZXJtY29sb3IuY29sb3JlZChsb2dvLCBjb2xvcj0icmVkIiksIHRlcm1jb2xvci5jb2xvcmVkKG1iLCBjb2xvcj0iYmx1ZSIpLCB0ZXJtY29sb3IuY29sb3JlZChkZXNjciwgY29sb3I9ImdyZWVuIikpCglwcmludCgnPScgKiA1MCkKCSMjIC0tLS0tLS0tLS0tLS0tLS0tLSBFbmQgRGVzY3JhcHRpb24gU2NyaXB0IC0tLS0tLS0tLS0tLS0tLS0tLSMjCgludW1iZXIgPSAnMDEwNTA4MDkzMjQnCglwd2QgPSAnQTEyMzQ1YUAnCgkjbnVtYmVyID0gaW5wdXQoIiBbLTEtXSBFbnRlciBOdW1iZXIgQW5hIFZvZGFmb25lOiAiKQojCXB3ZCA9IGlucHV0KCIgWy0yLV0gRW50ZXIgUGFzc3dvcmQgQW5hIFZvZGFmb25lOiAiKQoJd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgcmVxOgoJCSMjIHRva2VuCgkJZGVmIHRva2VuKCk6CgkJCXVybCA9ICdodHRwczovL21vYmlsZS52b2RhZm9uZS5jb20uZWcvc2VydmljZXMvc2VjdXJpdHkvb2F1dGgvb2F1dGgvdG9rZW4nCgkJCWhlYWRlciA9IHsKCQkJJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonLAoJCQknYXBpLWhvc3QnOiAndG9rZW4nLAoJCQknQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJywKCQkJJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAoJCQknSG9zdCc6J21vYmlsZS52b2RhZm9uZS5jb20uZWcnLAoJCQknQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAnLAoJCQknVXNlci1BZ2VudCc6ICdva2h0dHAvMy4xMi4xJwoJCQl9CgkJCWZvcm1EYXRhID0gewoJCQkndXNlcm5hbWUnOiBudW1iZXIsCgkJCSdwYXNzd29yZCc6IHB3ZCwKCQkJJ2NsaWVudF9zZWNyZXQnOidzZWNyZXQnLAoJCQknZ3JhbnRfdHlwZSc6J3Bhc3N3b3JkJywKCQkJJ2NsaWVudF9pZCc6J215LXRydXN0ZWQtY2xpZW50JwoJCQl9CgkJCXNlbmREYXRhID0gcmVxLnBvc3QodXJsLGhlYWRlcnMgPSBoZWFkZXIsIGRhdGEgPSBmb3JtRGF0YSkKCQkJYWNjZXNzX3Rva2VuID0gc2VuZERhdGEuanNvbigpWydhY2Nlc3NfdG9rZW4nXQoJCQlyZXR1cm4gYWNjZXNzX3Rva2VuCgkJIyMtLS0tLS0gRW5kIHRva2VuIC0tLS0tLS0jIwoKCQkjIyBPZmZlciA0MDAgTUIKCQlkZWYgb2ZmZXI0MDBNQigpOgoJCQl1cmwgPSAnaHR0cHM6Ly9tb2JpbGUudm9kYWZvbmUuY29tLmVnL3NlcnZpY2VzL2R4bC9wb20vcHJvZHVjdE9yZGVyJwoJCQloZWFkZXIgPSB7CgkJCSdhcGktaG9zdCc6ICdQcm9kdWN0T3JkZXJpbmdNYW5hZ2VtZW50SG9zdCcsCgkJCSd1c2VDYXNlJzogJ01JUHJvZmlsZScsCgkJCSdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsCgkJCSdhY2Nlc3MtdG9rZW4nOiB0b2tlbigpLAoJCQknbXNpc2RuJzogbnVtYmVyLAoJCQknQWNjZXB0LUxhbmd1YWdlJzogJ2FyJywKCQkJJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04JywKCQkJJ0hvc3QnOiAnbW9iaWxlLnZvZGFmb25lLmNvbS5lZycsCgkJCSdDb25uZWN0aW9uJzogJ0tlZXAtQWxpdmUnLAoJCQknQWNjZXB0LUVuY29kaW5nJzogJ2d6aXAnLAoJCQknVXNlci1BZ2VudCc6ICdva2h0dHAvMy4xMi4xJwoJCQl9CgkJCXBheWxvYWQgPSB7ImNoYW5uZWwiOnsibmFtZSI6Ik1vYmlsZUFwcCJ9LCJjaGFyYWN0ZXJpc3RpYyI6W10sCgkJCSJvcmRlckl0ZW0iOlt7ImFjdGlvbiI6ImFkZCIsInByb2R1Y3QiOnsiY2hhcmFjdGVyaXN0aWMiOlt7Im5hbWUiOiJMYW5nSWQiLAoJCQkidmFsdWUiOiJhciJ9LHsibmFtZSI6IkV4ZWN1dGlvblR5cGUiLCJ2YWx1ZSI6IlN5bmMifV0sImlkIjoiMTIwIiwKCQkJInJlbGF0ZWRQYXJ0eSI6W3siaWQiOmYie251bWJlcn0iLCJuYW1lIjoiTVNJU0ROIiwicm9sZSI6IlN1YnNjcmliZXIifV0sCgkJCSJAdHlwZSI6Ik1JIn19XSwiQHR5cGUiOiJNSVByb2ZpbGUifQoKCQkJc2VuZERhdGEgPSByZXEucG9zdCh1cmwsaGVhZGVycyA9IGhlYWRlciwgZGF0YSA9IGpzb24uZHVtcHMocGF5bG9hZCkpCgkJCXN0YXRlID0gc2VuZERhdGEuanNvbigpCgkJCWlmIHN0cihzdGF0ZSkuZmluZCgic3RhdGUiKSAhPSAtMToKCQkJCXByaW50KCc+Jyo1MCkKCQkJCXByaW50KCIgX18gb2ZmZXIgZGlzY291bnQgTUIgYWRkZWQgc3VjY2Vzc2Z1bGx5IF9fIikKCQkJCXByaW50KCc+Jyo1MCkKCQkJZWxzZTo
